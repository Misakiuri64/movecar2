
  <!DOCTYPE html>
  <html lang="zh-CN">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è‡ªåŠ©æŒªè½¦æœåŠ¡</title>
    <style>
      body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: #f0f2f5; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; padding: 20px; box-sizing: border-box; }
      .card { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); width: 100%; max-width: 400px; text-align: center; }
      h1 { color: #333; margin-bottom: 20px; font-size: 24px; }
      /* è¾“å…¥æ¡†æ ·å¼ä¼˜åŒ– */
      input { width: 100%; padding: 15px; border: 2px solid #ddd; border-radius: 12px; font-size: 18px; margin-bottom: 20px; box-sizing: border-box; text-align: center; text-transform: uppercase; transition: border-color 0.3s; }
      input:focus { border-color: #0093E9; outline: none; }
      input::placeholder { color: #aaa; opacity: 1; }
      button { width: 100%; padding: 15px; background: linear-gradient(135deg, #0093E9 0%, #80D0C7 100%); color: white; border: none; border-radius: 12px; font-size: 18px; font-weight: bold; cursor: pointer; transition: transform 0.1s; }
      button:active { transform: scale(0.98); }
      .toast { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); color: white; padding: 10px 20px; border-radius: 20px; font-size: 14px; opacity: 0; transition: opacity 0.3s; pointer-events: none; }
      .toast.show { opacity: 1; }
    </style>
  </head>
  <body>
    <div class="card">
      <h1>éªŒè¯è½¦ç‰Œ</h1>
      <div style="font-size: 60px; margin-bottom: 10px;">ğŸš—</div>
      <p style="color: #666; margin-bottom: 25px;">è¯·è¾“å…¥è½¦ç‰Œè”ç³»è½¦ä¸»</p>
      <input type="text" id="licenseInput" placeholder="ä¾‹å¦‚:æ²ªA888666" autocomplete="on">
      <button onclick="verifyLicense()" id="btn">ä¸‹ä¸€æ­¥</button>
    </div>
    <div id="toast" class="toast"></div>
    <script>
      async function verifyLicense() {
        const input = document.getElementById('licenseInput');
        const btn = document.getElementById('btn');
        const plate = input.value.trim().toUpperCase();
        
        if (!plate) return showToast('è¯·è¾“å…¥è½¦ç‰Œ');
        
        btn.disabled = true;
        btn.innerText = 'æŸ¥è¯¢ä¸­...';
        
        try {
          const res = await fetch('/api/verify-license', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ license: plate })
          });
          const data = await res.json();
          
          if (data.success) {
            window.location.href = '/notify?plate=' + encodeURIComponent(data.license);
          } else {
            showToast(data.message);
            btn.disabled = false;
            btn.innerText = 'ä¸‹ä¸€æ­¥';
          }
        } catch (e) {
          showToast('ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•');
          btn.disabled = false;
          btn.innerText = 'ä¸‹ä¸€æ­¥';
        }
      }
      
      function showToast(msg) {
        const t = document.getElementById('toast');
        t.innerText = msg;
        t.classList.add('show');
        setTimeout(() => t.classList.remove('show'), 3000);
      }
    </script>
  </body>
  </html>
  
